const Discord = require('discord.js');
const client = new Discord.Client();
const prefix = "!"
client.on('ready', () => {
  console.log(`Logged in as ${client.user.tag}!`);

});

client.on('ready', () => {

    client.user.setActivity("SOON || Ù‚Ø±ÙŠØ¨Ø§",{type: 'streaming'})

});

client.on('message', message => {
  if (true) {
if (message.content === 'inv') {
      message.author.send('   https://discordapp.com/oauth2/authorize?client_id=463837201092968448&scope=bot&permissions=1  |  ØªÙØ¶Ù„ Ø±Ø¨Ø· Ø§Ù„Ø¨ÙˆØª     ').catch(e => console.log(e.stack));

    }
   }
  });
 
 
client.on('message', message => {
     if (message.content === "inv") {
     let embed = new Discord.RichEmbed()
  .setAuthor(message.author.username)
  .setColor("#9B59B6")
  .addField(" Done | ØªÙ€Ù€Ù€Ù€Ù…" , " |  ØªÙ€Ù€Ù€Ù€Ù… Ø§Ø±Ø³Ù€Ù€Ø§Ù„Ùƒ ÙÙŠ Ø§Ù„Ø®Ù€Ù€Ø§Øµ")
  message.channel.sendEmbed(embed);
    }
});




 


client.on("message", msg => {
           var prefix = "!";
  if(msg.content.startsWith (prefix + "id")) {
    if(!msg.channel.guild) return msg.reply('**:x: Ø§Ø³Ù Ù„ÙƒÙ† Ù‡Ø°Ø§ Ø§Ù„Ø§Ù…Ø± Ù„Ù„Ø³ÙŠØ±ÙØ±Ø§Øª ÙÙ‚Ø· **');         
      const embed = new Discord.RichEmbed();
  embed.addField(":cloud_tornado:  Ø§Ù„Ø§Ø³Ù…", `**[ ${msg.author.username}#${msg.author.discriminator} ]**`, true)
          .addField(":id:  Ø§Ù„Ø§ÙŠØ¯ÙŠ", `**[ ${msg.author.id} ]**`, true)
          .setColor("RANDOM")
          .setFooter(msg.author.username , msg.author.avatarURL)
          .setThumbnail(`${msg.author.avatarURL}`)
          .setTimestamp()
          .setURL(`${msg.author.avatarURL}`)
          .addField(':spy:  Ø§Ù„Ø­Ø§Ù„Ø©', `**[ ${msg.author.presence.status.toUpperCase()} ]**`, true)
          .addField(':satellite_orbital:   ÙŠÙ„Ø¹Ø¨', `**[ ${msg.author.presence.game === null ? "No Game" : msg.author.presence.game.name} ]**`, true)
          .addField(':military_medal:  Ø§Ù„Ø±ØªØ¨', `**[ ${msg.member.roles.filter(r => r.name).size} ]**`, true)
          .addField(':robot:  Ù‡Ù„ Ù‡Ùˆ Ø¨ÙˆØª', `**[ ${msg.author.bot.toString().toUpperCase()} ]**`, true);
      msg.channel.send({embed: embed})

  }

});


client.on("message", message => {
 if (message.content === "!help") {
  const embed = new Discord.RichEmbed() 
      .setColor("#ffff00")
      .setThumbnail(message.author.avatarURL)
      .setDescription(`

***__ÙˆØµÙ Ø¹Ù† Ø§Ù„Ø¨ÙˆØª__***
**
Ø§Ù„Ø¨ÙˆØª ÙÙŠÙ‡ Ù…Ø§Ù†Ø¹ Ø§Ù„Ø¬Ø­ÙÙ„Ù‡
ÙÙŠÙ‡ Ø§ÙŠØ¶Ø§ Ù…Ø§Ù†Ø¹ Ù†Ø´Ø± Ø±ÙˆØ§Ø¨Ø·
wlc ØªØ¨ÙŠ ØªØ³ÙˆÙŠ Ø§Ù„ØªØ±Ø­ÙŠØ¨ Ø³ÙˆÙŠ Ø´Ø§Øª Ø§Ø³Ù…Ù‡ 
members ØªØ¨ÙŠ Ø§Ø°Ø§ Ø¯Ø®Ù„ Ø¹Ø¶Ùˆ ÙŠØ¹Ø·ÙŠ Ø±ØªØ¨Ø© Ø³ÙˆÙŠ Ø±ØªØ¨Ø© Ø§Ø³Ù…Ù‡
ÙÙŠ ØªØ±Ø­ÙŠØ¨ Ø¨Ø§Ù„Ø®Ø§Øµ 
ÙˆÙÙŠ Ø§ÙŠØ¶Ø£ Ù…Ø§Ù†Ø¹ Ø§Ù„Ø³Ø¨Ø§Ù… Ø§Ø°Ø§ Ø­ÙˆØ§Ù„ ÙŠØ³ÙˆÙŠ Ø³Ø¨Ø§Ù… ÙŠØ¹Ø·ÙŠÙ‡ Ù…ÙŠÙˆØª Ø´Ø§Øª
**
***__Bot orders__***
**
ã€pingã€
ã€idã€
ã€supportã€
ã€invã€
ã€banã€
ã€kickã€
ã€clearã€
ã€muteã€
ã€unmuteã€
ã€topinviteã€
ã€ã€
ã€ã€
**       
`)
message.author.sendEmbed(embed)
}
}); 



client.on('message', message => {
    var args = message.content.split(/[ ]+/)
    if(message.content.includes('discord.gg')){
        message.delete()
      message.channel.sendMessage("", {embed: {
        title: "Ù„Ø§ ØªÙ†Ø´Ø±",
        color: 0x06DF00,
        description: "ÙŠÙ…Ù†Ø¹ Ø§Ù„Ù†Ø´Ø± ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø³ÙŠØ±ÙØ±",
        footer: {
          text: "By REX"
        }
      }}).then(msg => {msg.delete(3000)});
                          }

     
});


client.on("guildMemberAdd", member => {
  member.createDM().then(function (channel) {
  return channel.send(`:rose:  ÙˆÙ„ÙƒÙ… Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ±:rose: 
:crown:Ø§Ø³Ù… Ø§Ù„Ø¹Ø¶Ùˆ  ${member}:crown:  
Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù… ${member.guild.memberCount} `) 
}).catch(console.error)
})




































client.on('message', message => {
  if (message.author.x5bz) return;
  if (!message.content.startsWith(prefix)) return;
  let command = message.content.split(" ")[0];
  command = command.slice(prefix.length);
  let args = message.content.split(" ").slice(1);
  if (command == "kick") {
               if(!message.channel.guild) return message.reply('** This command only for servers**');
  if(!message.guild.member(message.author).hasPermission("KICK_MEMBERS")) return message.reply("**You Don't Have ` KICK_MEMBERS ` Permission**");
  if(!message.guild.member(client.user).hasPermission("KICK_MEMBERS")) return message.reply("**I Don't Have ` KICK_MEMBERS ` Permission**");
  let user = message.mentions.users.first();
  let reason = message.content.split(" ").slice(2).join(" ");
  /*let log = client.channels.find("name", "log");
  if(!log) return message.reply("I've detected that this server doesn't have a 5bz-log text channel.");*/
  if (message.mentions.users.size < 1) return message.reply("**Ù…Ù†Ø´Ù† Ø´Ø®Øµ**");
  if(!reason) return message.reply ("**Ø§ÙƒØªØ¨ Ø³Ø¨Ø¨ Ø§Ù„Ø·Ø±Ø¯**");
  if (!message.guild.member(user)
  .kickable) return message.reply("**Ù„Ø§ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ø·Ø±Ø¯ Ø´Ø®Øµ Ø§Ø¹Ù„Ù‰ Ù…Ù† Ø±ØªØ¨ØªÙŠ ÙŠØ±Ø¬Ù‡ Ø§Ø¹Ø·Ø§Ø¡ Ø§Ù„Ø¨ÙˆØª Ø±ØªØ¨Ù‡ Ø¹Ø§Ù„ÙŠ**");
  message.guild.member(user).kick();
  const kickembed = new Discord.RichEmbed()
  .setAuthor(`KICKED!`, user.displayAvatarURL)
  .setColor("RANDOM")
  .setTimestamp()
  .addField("**User:**",  '**[ ' + `${user.tag}` + ' ]**')
  .addField("**By:**", '**[ ' + `${message.author.tag}` + ' ]**')
  .addField("**Reason:**", '**[ ' + `${reason}` + ' ]**')
  message.channel.send({
    embed : kickembed
  })
}
});





















const ms = require("ms");
const fs = require('fs');
var user = {};
var warn = {};
client.on('message', function(message) {
    	 if (!message.channel.guild) return;
let muteRole1 = message.guild.roles.find("name", "Muted");
     if (!muteRole1) return;
  if (message.author.id == client.user.id) return;
  if(JSON.stringify(user).indexOf(message.author.id) == -1) {
    user[message.author.id] = message.createdTimestamp;
    return;
  } else {
    if (Date.now() - user[message.author.id] < 695){
              message.author.delete

      if (JSON.stringify(warn).indexOf(message.author.id) == -1) {
        warn[message.author.id] = 1;
      } else {
        warn[message.author.id]++;
        message.author.delete
      }
      if (warn[message.author.id] < 4) {
        message.author.delete
      }
      delete user[message.author.id];
              message.author.delete

    } else {
      delete user[message.author.id];
              message.author.delete
    }
  }
  if (warn[message.author.id] == 4) {		   
     if (!message.channel.guild) return;
             message.author.delete
let muteRole1 = message.guild.roles.find("name", "Muted");
     if (!muteRole1) return;
    var guild = message.channel.guild;
          var currentTime = new Date(),
                   Year = currentTime.getFullYear(),
            Month = currentTime.getMonth() + 1,
            Day = currentTime.getDate(),
hours = currentTime.getHours() + 3 ,
            minutes = currentTime.getMinutes()+1,
            seconds = currentTime.getSeconds();
           if (!message.channel.guild) return;
     if (!muteRole1) return;
    var guild = message.channel.guild;
    message.guild.members.get(message.author.id).addRole(muteRole1);
     var msg;
        msg = parseInt();
      message.channel.fetchMessages({limit: msg}).then(messages => message.channel.bulkDelete(messages)).catch(console.error);
delete warn[message.author.id];
    delete user[message.author.id];
	const embed500 = new Discord.RichEmbed()
     .setTitle(`Ø§Ù„Ù…Ø±Ø³Ù„ ${message.author.username}#${message.author.discriminator} `)
      .setDescription(":white_check_mark:  | `Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ø³Ø¨Ø§Ù…`\n\nØ§Ù„Ø§Ø³Ù…:\n"+`${message.author.username}#${message.author.discriminator}`+"\nØ§Ù„Ø¹Ù‚ÙˆØ¨Ø©:\n  MuteChat / Ù…ÙŠÙˆØª ÙƒØªØ§Ø¨ÙŠ\n")
      .setFooter("Anti - Spam")
      .setColor("c91616")
    message.channel.send(embed500)
    	const embed20 = new Discord.RichEmbed()
      .setTitle(":scales: | ØªÙ…Øª Ù…Ø¹Ø§Ù‚Ø¨ØªÙƒ")
      .setDescription(`**:small_blue_diamond:Ù„Ù‚Ø¯ Ù‚Ù…Øª Ø¨Ù…Ø®Ø§Ù„ÙØ© Ù‚ÙˆØ§Ù†ÙŠÙ† Ø§Ù„Ø³ÙŠØ±ÙØ±**\n \n:gun: : Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù‚ÙˆØ¨Ù‡\nMuteChat / Ù…ÙŠÙˆØª ÙƒØªØ§Ø¨ÙŠ\n:clock1: ÙˆÙ‚Øª ÙˆØªØ§Ø±ÙŠØ® Ø§Ù„Ø¹Ù‚ÙˆØ¨Ù‡:\n`+ Year + "/" + Month + "/" + Day +', '+hours +'-' +minutes+'-'+seconds+"\n \n \n`ÙÙŠ Ø­Ø§Ù„ ÙƒØ§Ù†Øª Ø§Ù„Ø¹Ù‚ÙˆØ¨Ø© Ø¨Ø§Ù„ØºÙ„Ø·, ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø§Ø¯Ø§Ø±Ø©`")
          .setFooter("Anti - Spam")
      .setColor("c91616")
     message.author.send(embed20)
  }
});


client.on('message', message => {
    if (message.author.id === client.user.id) return;
            if (message.content.startsWith(prefix + "ping")) {
        message.channel.sendMessage(':ping_pong: Pong! In `' + `${client.ping}` + ' ms`');
    }
});


client.on('message', message => {
        let reason = message.content.split(' ').slice(2).join(' ')
        let muterole = message.guild.roles.find('name', 'muted')
        let men = message.mentions.users.first()
        if(message.content.startsWith(prefix + 'mute')) {
            if(!men) return message.channel.send("**Ù…Ù†Ø´Ù† Ø§Ù„Ø¹Ø¶Ùˆ**");
            if(!reason) return message.channel.send("**Do you want me to mute " + men.username + " with no reason ?, `Ex. #mute @REX` or just use `none` for no reason **`")
            if(!muterole) {
                message.guild.createRole({name: 'muted', color:"#505f74", permissions: [1115136]})
            }
            message.guild.member(men).addRole(muterole)
                message.channel.send('**' + men.username + ' has been muted! ğŸ¤**')
        }
        if(message.content.startsWith(prefix + 'unmute')) {
            if(!men) return message.channel.send("**Ù…Ù†Ø´Ù† Ø§Ù„Ø¹Ø¶Ùˆ**");
            if(!muterole) {
                message.guild.createRole({name: 'muted', color:'#505f74', permissions: [1115136]})
            }
            message.guild.member(men).removeRole(muterole)
                message.channel.send('**' + men.username + ' has been unmuted! ğŸ˜€ **')
        }
    })

 client.on ('guildMemberAdd', member => {
   var role = member.guild.roles.find ('name', 'members');
   member.addRole (role);
  
})

client.on ('guildMemberRemove', member => {
   
})




client.on('message',message =>{
    if(message.content.startsWith(prefix + 'topinvite')) {
  message.guild.fetchInvites().then(i =>{
  var invites = [];
  i.forEach(inv =>{
    var [invs,i]=[{},null];
    if(inv.maxUses){
        invs[inv.code] =+ inv.uses+"/"+inv.maxUses;
    }else{
        invs[inv.code] =+ inv.uses;
    }
        invites.push(`invite: ${inv.url} inviter: ${inv.inviter} \`${invs[inv.code]}\`;`);
  });
  var embed = new Discord.RichEmbed()
  .setColor("#000000")
  .setDescription(`${invites.join(`\n`)+'\n\n**By:** '+message.author}`)
  .setThumbnail("https://cdn.discordapp.com/attachments/470678787252813844/477229910486941725/PicsArt_08-02-09.08.16.jpg")
           message.channel.send({ embed: embed });
  });
    }
  });




client.on('guildMemberAdd', member => {
    let channel = member.guild.channels.find('name', 'wlc');
    let memberavatar = member.user.avatarURL
      if (!channel) return; 
    let embed = new Discord.RichEmbed()
        .setColor('RANDOM')
        .setThumbnail(memberavatar)
        .addField(':running_shirt_with_sash: | name :  ',`${member}`)
        .addField(':loudspeaker: | Ù†ÙˆØ±Øª Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠ Ù‚Ù„Ø¨ÙŠ' , `Welcome to the server, ${member}`)
        .addField(':id: | user :', "**[" + `${member.id}` + "]**" )
                .addField('â¡| Ø§Ù†Øª Ø§Ù„Ø¹Ø¶Ùˆ Ø±Ù‚Ù…',`${member.guild.memberCount}`)
                  .addField("Name:",`<@` + `${member.id}` + `>`, true)
                                     .addField(' Ø§Ù„Ù€Ø³ÙŠØ±ÙØ±', `${member.guild.name}`,true)
     .setFooter("**SERVER NAME**")
        .setTimestamp()
      channel.sendEmbed(embed);
    });

    




























client.login(process.env.BOT_TOKEN);  //Ø§ÙŠØ§ÙƒÙƒÙƒÙƒ ØªÙ„Ø¹Ø¨ Ù‡Ù†Ø§ Ù„Ø§ ØªØ­Ø· ØªÙˆÙƒÙ†Ùƒ Ù‡Ù†Ø§
